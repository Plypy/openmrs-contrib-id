var RecaptchaOptions={theme:"custom",custom_theme_widget:"recaptcha_widget"};function getParameterByName(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.href);return b==null?"":decodeURIComponent(b[1].replace(/\+/g," "))}
$().ready(function(){function b(a,b){$(a).val()||(b.preventDefault(),$(a).addClass("invalid"))}var f=$("#header ul#more").outerHeight(!0),d=$("#header li#moreContainer").outerHeight(!0),c=!1,e={},g=$(".field input[name=username]").siblings("span").html();$("html").click(function(){c==!0&&($("#header li#moreContainer").css("height",d).removeClass("on"),c=!1);$("body").hasClass("inline-login")&&$("body").removeClass("inline-login")});$("#header li#moreContainer").click(function(a){a.stopPropagation();
c==!1?($(this).css("height",f).addClass("on"),c=!0):c==!0&&($(this).css("height",d).removeClass("on"),c=!1)});$("#header ul#more a").click(function(a){a.stopPropagation();document.location=$(this).attr("href")});$("#inline-login-trigger").click(function(a){a.stopPropagation();$("body").hasClass("inline-login")?$("body").removeClass("inline-login"):($("body").addClass("inline-login"),$('#inline-login input[name="loginusername"]').focus())});$("ul#services").click(function(a){a.stopPropagation()});
$(".field input").focusin(function(){$(".field>span").css("visibility","hidden");$(this).siblings("span").css("visibility","visible")});$(".field input[name=username]").keyup(function(){var a=this,b=$(this).val();clearTimeout(e);b?e=setTimeout(function(){$.ajax({url:"/checkuser/"+b,error:function(){},success:function(c){c=$.parseJSON(c);c.illegal?($(a).addClass("invalid"),$(a).siblings("span").html("Illegal username specified.")):(c.exists||($(a).hasClass("invalid")&&$(a).removeClass("invalid"),
$(a).siblings("span").html('"'+b+'" is available!')),c.exists&&($(a).addClass("invalid"),$(a).siblings("span").html('"'+b+'" is already taken.')))}})},500):$(this).siblings("span").html(g)});$("#login-form #redirect-to").attr("value",getParameterByName("url"));$("form#edit, form#signup").submit(function(a){['input[name="firstname"]','input[name="lastname"]','input[name="email"]'].forEach(function(c){b(c,a)})});$("form#edit").submit(function(a){if(!$('input[name="oldpassword"]').val()&&$('input[name="newpassword"]').val()||
$('input[name="oldpassword"]').val()&&!$('input[name="newpassword"]').val())a.preventDefault(),$('input[name="oldpassword"]').addClass("invalid"),$('input[name="newpassword"]').addClass("invalid")});$("form#signup").submit(function(a){if(!$('input[name="username"]').val()||!/^[a-zA-Z0-9]+$/.exec($('input[name="username"]').val()))a.preventDefault(),$('input[name="username"]').addClass("invalid");['input[name="password"]','input[name="recaptcha_response_field"]'].forEach(function(c){b(c,a)});$('input[name="password"]').val().length<
8&&(a.preventDefault(),$('input[name="password"]').addClass("invalid"))});$("#inline-login form, #login-form form").submit(function(a){['input[name="loginusername"]','input[name="loginpassword"]'].forEach(function(c){b(c,a)})});$("#reset-form form").submit(function(a){b('input[name="resetCredential"]',a)});$("#reset-form-private form").submit(function(a){b('input[name="newpassword"]',a);$('input[name="newpassword"]').val().length<8&&(a.preventDefault(),$('input[name="newpassword"]').addClass("invalid"))})});