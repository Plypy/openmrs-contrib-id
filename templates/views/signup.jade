extends ../layouts/base

block defines
  - name = 'signup';
  - title = 'OpenMRS ID- Sign Up';
  - headline = 'Sign up for OpenMRS ID <small>Already have one? <a href="/login"> Sign in.</a></small>';
  - showSidebar = true;
  - sidebar = ['id-whatis'];
  - fail = fail || {};
  - failReason = failReason || {};
  - values = values || {};

append head
  //- script(src='https://www.google.com/recaptcha/api.js')
  script(src='/resource/scripts/min.js')

block content
  div.panel
    form.validate.signup#form-signup(action='/signup', method='post',
        autocomplete='off')

      div.row-item.form-group(class=(fail.username?'fail':undefined))
        div.input-wrapper.col-md-5
          input.required#username(type='text',
                name=disguise('username', spinner),
                placeholder='Username',
                value=(values.username || undefined)
                )
          label.error Required

        span.description
          | Only lowercase letters and numbers are allowed. (0-9, a-z).

      div.row-item.form-group(class={fail: fail.firstName || fail.lastName})
        div.col-md-5.no-padding
          div.input-wrapper.col-md-6.left
            input.required#fisrtName(type='text',
                  name=disguise('firstName', spinner),
                  placeholder='Given Name',
                  value=(values.firstName || undefined)
                  )
            label.error Required

          div.input-wrapper.col-md-6.right
            input.required#lastName(type='text',
                  name=disguise('lastName', spinner),
                  placeholder='Surname',
                  value=(values.lastName || undefined)
                  )
            label.error Required

      div.row-item.form-group(class={fail: fail.primaryEmail})
        div.input-wrapper.col-md-5
          input.required#email(type='text', name=disguise('primaryEmail', spinner),
                placeholder='Email Address',
                value=(values.primaryEmail || undefined)
                )
          label.error Required

      //- conuntry, honeypot field
      div.row-item.form-group
        input.col-md-5#country(type='text', name=disguise('country', spinner)
              placeholder='Country')


      div.row-item.form-group(class={fail: fail.password})
        div.input-wrapper.col-md-5

          input.required#password(type='password', name=disguise('password', spinner),
                placeholder='Password')
          label.error Required
        span.description
          | Passwords must be at least 8 characters long.

      //- div.row-item.form-group.g-recaptcha(data-sitekey=recaptchaPublic)

      input(type='hidden', name='spinner', value=spinner)
      input(type='hidden', name=disguise('timestamp', spinner),
            value=timestamp)

      div.row-item.form-group
        input.btn.btn-success.col-md-3(type='submit', value='Join the Community Â» ')
